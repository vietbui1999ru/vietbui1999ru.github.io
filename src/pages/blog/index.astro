---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout>
  <div class="mx-auto max-w-4xl px-4 py-24 sm:px-6">
    <h1 class="text-4xl font-bold mb-8">Blog</h1>
    <ul class="space-y-4">
      {posts.map((post) => (
        <li>
          <a
            href={`/blog/${post.id}`}
            class="text-primary hover:underline font-medium"
          >
            {post.data.title}
          </a>
          <span class="text-muted-foreground text-sm ml-2">
            {post.data.date.toLocaleDateString("en-US")}
          </span>
        </li>
      ))}
    </ul>
  </div>
</BaseLayout>
